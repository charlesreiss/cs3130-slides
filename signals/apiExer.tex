
\ifdefined\codeBoxA\else\newsavebox\codeBoxA\fi
\begin{lrbox}{\codeBoxA}
\lstset{language=C,style=script}
\begin{lstlisting}
void handle_usr1(int num) {
    write(1, "X", 1);
    kill(2000, SIGUSR1);
    _exit(0);
}
int main() {
    struct sigaction act; 
    ... // initialize rest of "act"
    act.sa_handler = &handle_usr1;
    sigaction(SIGUSR1, &act, NULL);
    kill(1000, SIGUSR1);
}
\end{lstlisting}
\end{lrbox}
\ifdefined\codeBoxB\else\newsavebox\codeBoxB\fi
\begin{lrbox}{\codeBoxA}
\lstset{language=C,style=script}
\begin{lstlisting}
void handle_usr1(int num) {
    write(1, "Y", 1);
    _exit(0);
}
int main() {
    struct sigaction act;
    ... // initialize rest of "act"
    act.sa_handler = &handle_usr1;
    sigaction(SIGUSR1, &act, NULL);
}
\end{lstlisting}
\end{lrbox}

\begin{frame}[fragile,label=signalEx]{output of this?}
\begin{tikzpicture}
\node[draw,very thick,label={north:pid 1000}] (left) {
\usebox{\codeBoxA}
};
\node[anchor=north west,draw,very thick,label={north:pid 2000}] (right) at ([xshift=1cm]left.north east) {
\usebox{\codeBoxB}
};
\end{tikzpicture}

If these run at same time, expected output?
\begin{tabular}{lll}
A. XY & B. X & C. Y \\
D. YX & E. X or XY, depending on timing & F. crash \\
G. (nothing) & H. something else \\
\end{tabular}
\end{frame}

\ifdefined\codeBoxA\else\newsavebox\codeBoxA\fi
\begin{lrbox}{\codeBoxA}
\lstset{language=C,style=script}
\begin{lstlisting}
void handle_usr1(int num) {
    write(1, "X", 1);
    kill(2000, SIGUSR1);
    _exit(0);
}
int main() {
    struct sigaction act;
    ... // initialize rest of "act"
    act.sa_handler = &handle_usr1;
    sigaction(SIGUSR1, &act);
    sleep(1); // ADDED
    kill(1000, SIGUSR1);
    while (1) pause(); // ADDED
}
\end{lstlisting}
\end{lrbox}
\ifdefined\codeBoxB\else\newsavebox\codeBoxB\fi
\begin{lrbox}{\codeBoxA}
\lstset{language=C,style=script}
\begin{lstlisting}
void handle_usr1(int num) {
    write(1, "Y", 1);
    _exit(0);
}
int main() {
    struct sigaction act;
    ... // initialize rest of "act"
    act.sa_handler = &handle_usr1;
    sigaction(SIGUSR1, &act);
    while (1) pause(); // ADDED
}
\end{lstlisting}
\end{lrbox}

\begin{frame}[fragile,label=signalEx2]{output of this? (v2)}
\vspace{-0.1cm}
\begin{tikzpicture}
    \node[draw,very thick,label={[inner sep=0mm]north:pid 1000}] (left) {
\usebox{\codeBoxA}
};
\node[anchor=north west,draw,very thick,label={[inner sep=0mm]north:pid 2000}] (right) at ([xshift=1cm]left.north east) {
\usebox{\codeBoxB}
};
\end{tikzpicture}
\vspace{-0.1cm}

If these run at same time, expected output?
\begin{tabular}{lll}
A. XY & B. X & C. Y \\
D. YX & E. X or XY, depending on timing & F. crash \\
G. (nothing) & H. something else \\
\end{tabular}
\end{frame}
