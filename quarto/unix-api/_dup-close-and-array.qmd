
### open/dup/close/etc. and fd array  {.smaller}


```c
// something like this in OS code
struct process_info {
  ...
  struct open_file_description *files[NUM];
};
```
 

* open: `files[new_fd] = ...;`
* dup2(from, to): `files[to] = files[from];`
* close: `files[fd] = NULL;`
* fork:  
```c
  for (int i = ...)
      child->files[i] = parent->files[i];

```
 
<hr class="vspace" />
* (plus extra work to avoid leaking memory)

