
# some malicious things we'd like to stop {visibility="hidden"}

### things programs on portal shouldn't do 

* read other user's files
* modify OS's memory
* read other user's data in memory
* hang the entire system

# privileged instruction idea {visibility="hidden"}

### things programs on portal shouldn't do 

* <em>read other user's files</em>
* modify OS's memory
* read other user's data in memory
* hang the entire system

{{< include /kernel/_priv-instr-intro.qmd >}}

## preview: unix design {visibility="hidden"}


### hardware + system call interface 

![](/kernel/texfig/unixDesignHWNoLib.figure.svg)

## OS code in memory {visibility="hidden"}

{{< include /kernel/_calling-the-OS-naive.qmd >}}

## exception entry point {visibility="hidden"}

{{< include /kernel/_syscall-setup-boot-simple.qmd >}}

## system call idea {visibility="hidden"}

{{< include /kernel/_syscallThreadDiag.qmd >}}

## aside: terminology {visibility="hidden"}

{{< include /kernel/_syscall-term-parts.qmd >}}

## system calls on Linux {visibility="hidden"}

{{< include /kernel/_sysCallLinux.qmd >}}

## maybe not return? {visibility="hidden"}

{{< include /kernel/_syscallThreadLaterDiag.qmd >}}

## system call wrappers {visibility="hidden"}

{{< include /kernel/_syscallWrap.qmd >}}

# interlude: strace {visibility="hidden"}

{{< include /kernel/_strace-hello.qmd >}}

# kernel + standard library {visibility="hidden"}

### hardware + system call + library interface 

![](/kernel/texfig/unixDesignHWLib.figure.svg)

# memory protection {visibility="hidden"}

### things programs on portal shouldn't do 

* read other user's files
* <em>modify OS's memory</em>
* <em>read other user's data in memory</em>
* hang the entire system

## exercise: expected behavior?{visibility="hidden"}

{{< include /kernel/_memProtectQC.qmd >}}

## address spaces{visibility="hidden"}

{{< include /kernel/_memProtectAddressSpaces.qmd >}}

# extending system calls: exception idea {visibility="hidden"}

{{< include /kernel/_exceptIdea.qmd >}}

## reasons for exceptions, generally {visibility="hidden"}

{{< include /kernel/_exceptKindInfoLib.qmd >}}

# infinite loop {visibility="hidden"}

### things programs on portal shouldn't do 

* read other user's files
* modify OS's memory
* read other user's data in memory
* <em>hang the entire system</em>

# exception kinds, summarized {visibility="hidden"}

{{< include /kernel/_exceptVenn.qmd >}}

## exception handling generalized {visibility="hidden"}

{{< include /kernel/_exceptThreadDiag.qmd >}}

## operating system runs {visibility="hidden"}

{{< include /kernel/_contextSwitchTimeline.qmd >}}

## context switches {visibility="hidden"}

{{< include /kernel/_contextSwitch.qmd >}}

# thread idea {visibility="hidden"}

{{< include /kernel/_thread.qmd >}}

# not just timers {visibility="hidden"}

## typical I/O pattern {visibility="hidden"}

{{< include /kernel/_exceptIOPattern.qmd >}}

{{< include /kernel/_keyInTimeline.qmd >}}

# combined timeline {visibility="hidden"}

{{< include /kernel/_ioTimeline.qmd >}}

# preview: empty loop lab {visibility="hidden"}

{{< include /kernel/_emptyLoopLab.qmd >}}

# review: exception / context switch {visibility="hidden"}

{{< include /kernel/_reviewExceptCtxt.qmd >}}

# exercise {visibility="hidden"}

{{< include /kernel/_howManyEx.qmd >}}

## aside: terms {visibility="hidden"}

{{< include /kernel/_exceptTerms.qmd >}}

# process {visibility="hidden"}

{{< include /kernel/_processIdea.qmd >}}
