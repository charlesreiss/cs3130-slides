
### atomic add 



* x86-64 also has an atomic add operation
 
```
lock add %rax, (%rcx)

```
 

* M[RCX] $\rightarrow$ M[RCX] + RAX 

   * but without being interrupted by other processors

* next slide: represent as `AtomicAdd(&dest, source)`


### exercise: spin-barriers with atomic add 



* exercise: implementing one-use barrier with atomic adds
* finish the psuedocode
 
```
\begin{lstlisting}
[langauge=C,style=smaller] struct Barrier  int value;  BarrierInit(Barrier *barrier, int numThreads) 
 barrier->value = numThreads;  
\end{stlisting}
```

