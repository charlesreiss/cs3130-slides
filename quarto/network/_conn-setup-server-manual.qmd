
### connection setup: server, manual  {.smaller}


<pre><code>int server_socket_fd = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
struct sockaddr_in addr;
addr.sin_family = AF_INET;
addr.sin_addr.s_addr = <span data-fragment-index="2" class="fragment custom myem-only">INADDR_ANY</span>; /* "any address I can use" */
    <span data-fragment-index="3" class="fragment custom myem-only">/* or: addr.s_addr.in_addr = INADDR_LOOPBACK (127.0.0.1) */</span>
    /* or: addr.s_addr.in_addr = htonl(...); */
addr.sin_port = <span data-fragment-index="4" class="fragment custom myem-only">htons(9999)</span>; /* port number 9999 */

if (bind(server_socket_fd, &amp;addr, sizeof(addr)) &lt; 0) {
    /* handle error */
}
listen(server_socket_fd, <span data-fragment-index="4" class="fragment custom myem-only">MAX_NUM_WAITING</span>);
...
int socket_fd = accept(server_socket_fd, NULL);
</code></pre>
 ![](/network/texfig/conn-setup-server-manual.figure-1.svg){.absolute top="0%" left="0%" width=1050 height=600 .my-center  .fragment .fade-in-then-out fragment-index=1}
![](/network/texfig/conn-setup-server-manual.figure-2.svg){.absolute top="0%" left="0%" width=1050 height=600 .my-center  .fragment .fade-in-then-out fragment-index=2}
![](/network/texfig/conn-setup-server-manual.figure-3.svg){.absolute top="0%" left="0%" width=1050 height=600 .my-center  .fragment .fade-in-then-out fragment-index=3}
![](/network/texfig/conn-setup-server-manual.figure-4.svg){.absolute top="0%" left="0%" width=1050 height=600 .my-center  .fragment .fade-in-then-out fragment-index=4}

