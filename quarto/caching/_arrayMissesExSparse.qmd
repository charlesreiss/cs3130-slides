
### C and cache misses (3)  {.smaller}


```c
typedef struct {
    int a_value, b_value;
    int boring_values[126];
} item;
item items[8]; // 4 KB array
int a_sum = 0, b_sum = 0;
for (int i = 0; i < 8; ++i)
    a_sum += items[i].a_value;
for (int i = 0; i < 8; ++i)
    b_sum += items[i].b_value;

```
 

* [Assume everything but <code>items</code> is kept in registers (and the compiler does not do anything funny).]{.my-small}
* How many <i>data cache misses</i> on a 2KB direct-mapped cache with 16B cache blocks?


### C and cache misses (3, rewritten?) 


```c
item array[1024]; // 4 KB array
int a_sum = 0, b_sum = 0;
for (int i = 0; i < 1024; i += 128)
    a_sum += array[i];
for (int i = 1; i < 1024; i += 128)
    b_sum += array[i];

```


### C and cache misses (4)  {.smaller}


```c
typedef struct {
    int a_value, b_value;
    int boring_values[126];
} item;
item items[8]; // 4 KB array
int a_sum = 0, b_sum = 0;
for (int i = 0; i < 8; ++i)
    a_sum += items[i].a_value;
for (int i = 0; i < 8; ++i)
    b_sum += items[i].b_value;

```
 

* [Assume everything but <code>items</code> is kept in registers (and the compiler does not do anything funny).]{.my-small}
* How many <i>data cache misses</i> on a 4-way set associative 2KB direct-mapped cache with 16B cache blocks?

