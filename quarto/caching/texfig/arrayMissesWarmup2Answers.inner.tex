\begin{tikzpicture}
    \foreach \offset in {-2,-1,0,1,2,...,31,32,33} {
        \draw[black!25,thin] (\offset * \mywidth, 0) rectangle ++(\mywidth, -1);
    }
    \node[font=\large,anchor=east] at (-2 * \mywidth, -.5) {\ldots};
    \node[font=\large,anchor=west] at (34 * \mywidth, -.5) {\ldots};
    \foreach \offset/\name in {8/0,12/1,16/2,20/3} {
        \draw[thin,fill=blue!10] (\offset * \mywidth, 0) rectangle ++(\mywidth * 4, -1)
            node[fill=none,opacity=1.0,black,midway,font=\fontsize{9}{10}\tt\selectfont] {array[\name]};
    }
    \begin{scope}
    \clip (-2.1 * \mywidth, .2) rectangle (34.1 * \mywidth, -1.1);
    \foreach \offset in {-8,0,8,16,24,32} {
        \draw[ultra thick,red!30!black] (\offset * \mywidth, 0)
            rectangle ++(\mywidth * 8, -1);
    }
    \end{scope}
        \draw[very thick, decorate, decoration={brace}] (8 * \mywidth, 0.05) -- ++(8 * \mywidth, 0)
            node[above,midway] {one cache block};
    \matrix[tight matrix,
        nodes={minimum height=0.7cm},
        column 1/.append style={nodes={text width=6cm}},
        column 2/.append style={nodes={text width=6cm,font=\tt}},
        row 1/.append style={nodes={font=\bfseries}},
        anchor=north west] at (0, -2) {
        memory access \& cache contents afterwards \\ 
        --- \& (empty) \\
        read \lstinline|array[0]| (miss) \& \{array[0], array[1]\} \\
        read \lstinline|array[2]| (miss) \& \{array[2], array[3]\} \\
        read \lstinline|array[1]| (miss) \& \{array[0], array[1]\} \\
        read \lstinline|array[3]| (miss) \& \{array[2], array[3]\} \\
    };
\end{tikzpicture}