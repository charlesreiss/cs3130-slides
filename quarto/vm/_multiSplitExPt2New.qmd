### exercise setup: 2-level splitting  {.smaller}


* 9-bit virtual address
* 6-bit physical address
* [8-byte pages $\rightarrow$ 3-bit page offset (bottom)]{.fragment fragment-index=2 .custom .myem-only}
* 9-bit VA: 6 bit VPN + 3 bit PO
* 6-bit PA: 3 bit PPN + 3 bit PO
* [1 page page tables w/ 1 byte entry $\rightarrow$ 8 entry PTs]{.fragment fragment-index=3 .custom .myem-only}
* [8 entry page tables $\rightarrow$ 3-bit VPN parts]{.fragment fragment-index=4 .custom .myem-only}
* 9-bit VA: 3 bit VPN part 1; 3 bit VPN part 2

<!-- FIXME: change images to non-overlays -->

![](/vm/texfig/multiSplitExPt2-2-level-splitting.figure-1.svg){.absolute top="0%" left="0%" width=1050 height=600 .my-center  .fragment .fade-in-then-out fragment-index=1}
![](/vm/texfig/multiSplitExPt2-2-level-splitting.figure-2.svg){.absolute top="0%" left="0%" width=1050 height=600 .my-center  .fragment .fade-in-then-out fragment-index=2}
![](/vm/texfig/multiSplitExPt2-2-level-splitting.figure-3.svg){.absolute top="0%" left="0%" width=1050 height=600 .my-center  .fragment .fade-in-then-out fragment-index=3}
![](/vm/texfig/multiSplitExPt2-2-level-splitting.figure-4.svg){.absolute top="0%" left="0%" width=1050 height=600 .my-center  .fragment .fade-in-then-out fragment-index=4}


### 2-level example  {.vm-contents-exercise}

::: {.vm-contents-top}

[9-bit]{.fragment fragment-index=1 .custom .myem-only} virtual addresses, 6-bit physical; 8 byte pages, 1 byte PTE<br/>
page tables 1 page; PTE: 3 bit PPN (MSB), 1 valid bit, 4 unused<br/>
page table base register <code>0x20</code>; translate virtual address <code>0x129</code><br/>

:::

::::: {.columns}

:::: {.column width="31%"}

<table>
<colgroup><col class="physadd" /><col class="bytes" /></colgroup>
<tr><th>physical address</th><th>bytes</th></tr>
<tr><td>0x00-03</td><td>00 11 22 33</td></tr>
<tr><td>0x04-07</td><td>44 55 66 77</td></tr>
<tr><td>0x08-0B</td><td>88 99 AA BB</td></tr>
<tr><td>0x0C-0F</td><td>CC DD EE FF</td></tr>
<tr><td>0x10-13</td><td>1A 2A 3A 4A</td></tr>
<tr><td>0x14-17</td><td>1B 2B 3B 4B</td></tr>
<tr><td>0x18-1B</td><td>1C 2C 3C 4C</td></tr>
<tr><td>0x1C-1F</td><td>1C 2C 3C 4C</td></tr>
</table>

::::

:::: {.column width="31%"}

<table>
<colgroup><col class="physadd" /><col class="bytes" /></colgroup>
<tr><th>physical address</th><th>bytes</th></tr>
<tr><td>0x20-23</td><td>00 91 72 13</td></tr>
<tr><td>[0x24-27]{.myem-only .custom .fragment fragment-index=4}</td><td>[F4]{.myem-only .custom .fragment fragment-index=5} A5 36 07</td></tr>
<tr><td>0x28-2B</td><td>89 9A AB BC</td></tr>
<tr><td>0x2C-2F</td><td>CD DE EF F0</td></tr>
<tr><td>[0x30-33]{.myem-only .custom .fragment fragment-index=9}</td><td>BA [0A]{.myem-only .custom .fragment fragment-index=9} BA 0A</td></tr>
<tr><td>0x34-37</td><td>CB 0B CB 0B</td></tr>
<tr><td>0x38-3B</td><td>DC 0C DC 0C</td></tr>
<tr><td>[0x3C-3F]{.myem-only .custom .fragment fragment-index=5}</td><td>EC [0C]{.myem-only .custom .fragment fragment-index=6} EC 0C</td></tr>
</table>

::::

:::: {.column .solve .fragment fragment-index=2 width="37%"}

0x129 = [1 00]{.fragment fragment-index=3 .custom .myem-only .colorOne}[10 1]{.fragment fragment-index=6 .custom .myem-only .colorTwo}[001]{.fragment fragment-index=9 .custom .myem-only .colorThree} <br/>
0x20 + [100]{.fragment fragment-index=3 .custom .myem-only .colorOne}<sub>TWO</sub> $\times$ 1 = [0x24]{.fragment fragment-index=4 .custom .myem-only} <br/>
[PTE 1 value:]{.ptlabel}<br/>
0xF4 = [111]{.colorFour.fragment fragment-index=5 .custom .myem-only}1 0100<br/>
PPN [111]{.colorFour .fragment fragment-index=5 .custom .myem-only}, valid 1<br/>
<div class="fragment nomargin" data-fragment-index=5>
[PTE 2 addr:]{.ptlabel}<br/>
[111]{.colorFour .fragment fragment-index=5 .custom .myem-only} 000<sub>TWO</sub> + [101]{.colorTwo .fragment fragment-index=6 .custom .myem-only}<sub>TWO</sub> $\times$ 1 = 0x3D <br/>
[(111000<sub>TWO</sub> = [111]{.fragment .custom .myem-only fragment-index=4}$\times \text{page size}$)]{style="font-size: 85%; margin-left: 1em;"}<br/>
[PTE 2 value:]{.ptlabel} 0xDC<br/>
PPN [110]{.colorFive .fragment fragment-index=7 .custom .myem-only}; valid 1 <br/>
M[[110]{.colorFive .fragment fragment-index=7 .custom .myem-only} [001]{.colorThree .fragment fragment-index=8 .custom .myem-only} ([0x31]{.myem-only .custom .fragment fragment-index=9})] = [0x0A]{.custom .myem-only .fragment fragment-index=9}
</div>

::::

:::::
