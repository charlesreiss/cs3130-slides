\begin{tikzpicture}
\node[resource] (directory A) {
    directory B 
};
\node[resource] (directory B) at ([yshift=-4cm,xshift=4cm]directory A) {
    directory C
};
\node[resource] (directory C) at ([yshift=-4cm,xshift=-4cm]directory A) {
    directory A
};
\node[thread] (thread one) at ([xshift=-4cm,yshift=-1.5cm]directory A) {
  thread 1
};
\node[thread] (thread two) at ([xshift=4cm,yshift=-1.5cm]directory A) {
  thread 2
};
\node[thread] (thread three) at ([yshift=-6cm]directory A) {
  thread 3
};

\path[dependency] (thread one.north) ..  controls ([yshift=1cm]thread one.north) .. (directory A.west)
    node[midway,dependency reason,left] {
      waiting for lock
    };
\path[dependency] (thread two.south) ..  controls ([yshift=-1cm]thread two.south) .. (directory B.north)
    node[midway,dependency reason,right] {
      waiting for lock
    };
\path[dependency] (thread three.west) ..  controls ([yshift=-1cm]directory C.south) .. (directory C.south)
    node[midway,dependency reason,below left] {
      waiting for lock
    };
\path[dependency future] (directory A.east) .. controls ([yshift=1cm]thread two.north) .. (thread two.north)
    node[midway,dependency reason,right] {
      lock held by
    };
\path[dependency future] (directory B.south) .. controls ([xshift=2cm]thread three.east) .. (thread three.east)
    node[midway,dependency reason,below right] {
      lock held by
    };
\path[dependency future] (directory C.north) .. controls ([yshift=-1cm]thread one.south) .. (thread one.south)
    node[midway,dependency reason,left] {
      lock held by
    };
\end{tikzpicture}