\begin{frame}<1-11>[fragile,label=dinPhilAbort]{dining philosophers --- aborting}
\begin{tikzpicture}
% FIXME: dining philosophers
\path[draw,ultra thick] (0, 0) circle (3cm);
\foreach \x/\whenGrab/\whenNoGrab/\whenTryGrab in {0/1|11/2|4-10/0,72/1-9/12-/1-8,144/1-7/10-/1-6,216/1-5/8-/1-4,288/1-3/4|6-/1-2} {
    \begin{visibleenv}<\whenNoGrab>
    \path[fill=black!75,draw,thick] (\x:1.8cm) -- (\x+0.5:2.9cm) -- (\x-0.5:2.9cm) -- cycle;
    \end{visibleenv}
    \begin{visibleenv}<0>
    \path[fill=black!25,draw=black!25,thick] (\x:1.8cm) -- (\x+0.5:2.9cm) -- (\x-0.5:2.9cm) -- cycle;
    \draw[dashed] (\x:2.9cm) -- (\x+26.5:3.2cm);
    \draw[dashed] (\x:1.8cm) -- (\x+26.5:2.3cm);
    \end{visibleenv}
    \begin{visibleenv}<\whenGrab>
    \path[fill=black!75,draw=black,thick] (\x+26.5:3.2cm) -- (\x+26:3.2cm) -- (\x+26:2.3cm) -- cycle;
    \end{visibleenv}
    \begin{visibleenv}<\whenTryGrab>
    \draw[dashed,very thick,fill=black!10] (\x+52:2.8cm) circle (0.4cm);
    \end{visibleenv}
    \draw[rounded corners,thick] (\x+27:3.9cm) -- (\x+45:3.9cm) -- (\x+46:3.3cm) -- (\x+26:3.3cm) -- cycle;
    \draw[fill=white,very thick] (\x+36:3.6cm) circle (0.4cm);
    \draw[thick] (\x+36:2.5cm) circle (0.4cm);
    \draw[thin] (\x+36:2.5cm) circle (0.35cm);
}
\foreach \x/\whenGrabOther/\whenGrabOtherHilite in {288/3/3,216/5/5,144/7/7,72/9/9,0/11/11} {
    \begin{visibleenv}<\whenGrabOther>
    \path[fill=black!75,draw=black,thick] (\x+46.5:3.2cm) -- (\x+46:3.2cm) -- (\x+46:2.3cm) -- cycle;
    \end{visibleenv}
    \begin{visibleenv}<\whenGrabOtherHilite>
    \path[fill=red!75,draw=red,thick] (\x+46.5:3.2cm) -- (\x+46:3.2cm) -- (\x+46:2.3cm) -- cycle;
    \end{visibleenv}
}
\begin{visibleenv}<1-2>
\draw[red,ultra thick,fill=red!10] (36:3.6cm) circle (0.4cm);
\end{visibleenv}
\foreach \x/\when in {0/2,288/4,216/6,144/8,72/10} {
\begin{visibleenv}<\when>
\path[fill=red!75,draw=red,thick] (\x:1.8cm) -- (\x+0.5:2.9cm) -- (\x-0.5:2.9cm) -- cycle;
\end{visibleenv}
}
\begin{visibleenv}<1-2>
\node[anchor=north west,align=left] at (4.0, 1) {
    dining philosopher \\
    what if someone's impatient \\
    just gives up instead of waiting
};
\end{visibleenv}
\begin{visibleenv}<3-10>
\node[anchor=north west,align=left] at (4.0, 1) {
    now everyone else can eat \\
};
\end{visibleenv}
\begin{visibleenv}<11->
\node[anchor=north west,align=left] at (4.0, 1) {
    and person who gave up \\
    might succeed later
};
\end{visibleenv}
\end{tikzpicture}
\end{frame}
