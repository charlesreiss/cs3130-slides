
\begin{frame}[fragile,label=sharedLib]{finding shared libraries (1)}
\begin{Verbatim}[fontsize=\fontsize{11}{12}\selectfont]
$ ls
libexample.so  main.c
$ clang -o main main.c -lexample
/usr/bin/ld: cannot find -lexample
clang: error: linker command failed with exit code 1 (use -v to see invocation)
$ clang -o main main.c -L. -lexample
$ ./main
./main: error while loading shared libraries:
    libexample.so: cannot open shared object file: No such
    file or directory
\end{Verbatim}
\begin{visibleenv}<2->
\hrule
\begin{Verbatim}[fontsize=\fontsize{11}{12}\selectfont]
$ LD_LIBRARY_PATH=. ./main
\end{Verbatim}
\textit{or}
\begin{Verbatim}[fontsize=\fontsize{11}{12}\selectfont]
$ export LD_LIBRARY_PATH=.
$ ./main
\end{Verbatim}
\textit{or}
\begin{Verbatim}[fontsize=\fontsize{11}{12}\selectfont]
$ clang -o main main.c -L. -lexample -Wl,-rpath .
$ ./main
\end{Verbatim}
\end{visibleenv}
\end{frame}

\begin{frame}{finding shared libraries (1)}
    \begin{itemize}
    \item \texttt{\textit{cc} \ldots -o program -L/path/to/lib \ldots -lfoo}
        \begin{itemize}
        \item on Linux: \texttt{/path/to/lib} only used to create program
        \item program contains \texttt{libfoo.so} \textit{without full path}
        \end{itemize}
    \item Linux default: \texttt{libfoo.so} expected to be in /usr/lib, /lib, and other `standard' locations
    \item possible overrides:
        \begin{itemize}
        \item LD\_LIBRARY\_PATH environment variable
        \item paths specified with \texttt{-Wl,-rpath=/path/to/lib} when creating executable
        \end{itemize}
    \end{itemize}
\end{frame}

