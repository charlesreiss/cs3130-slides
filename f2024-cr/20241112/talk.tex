\date{}
\title{}
\date{}
\usepackage{pgfplots}
\pgfplotsset{compat=1.16}
\begin{document}
\begin{frame}
    \titlepage
\end{frame}

\begin{frame}{last time}
    \begin{itemize}
    \item NAT, DHCP, lab API
    \item security properties --- confidentiality, authenticity
    \item shared secret key tools
        \begin{itemize}
        \item symmetric encryption
        \item message authentication
        \end{itemize}
    \item public/private keypairs
        \begin{itemize}
        \item private to \textit{no one}
        \item public to everyone
        \end{itemize}
    \item asymmetric encryption
    \end{itemize}
\end{frame}


\begin{frame}{NAT illusion}
    \begin{itemize}
    \item NAT illusion:
    \item private IP address communicating directly with public IP
    \vspace{.5cm}
    \item inside network, talking to outside:
        \begin{itemize}
        \item use private local address
        \item use public remote address
        \item never see router's address
        \end{itemize}
    \item outside network, talking to inside
        \begin{itemize}
        \item use public local address
        \item use router's public address
        \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{quiz Q1}
    \begin{itemize}
    \item forwarded packet needs to use \textit{unaltered source address+port}:
    \item local machine should think it's talking to public remote IP
        \begin{itemize}
        \item because that what it's connnecting to
        \end{itemize}
    \item local machine will use source address to find correct socket
        \begin{itemize}
        \item adjusting source address to router will confuse this process
        \end{itemize}
    \vspace{.5cm}
    \item forwarded packet needs to \textit{use private IP+port as destination}:
    \item local machine original made connection with this address
    \item local machine needs to match private IP+port versus its socket
    \end{itemize}
\end{frame}

\begin{frame}{on IP source addresses}
    \begin{itemize}
    \item if IP packet sent from A to D via routers B and C\ldots
    \item routers do not change addresses in the packet!
    \item include source + destination
    \vspace{.5cm}
    \item otherwise, hard for D to know who they're talking to
        \begin{itemize}
        \item example: to send acknowledgments back
        \end{itemize}
    \end{itemize}
\end{frame}

\section{tools without shared keys}

\subsection{asymmetric encryption}

\input{../secure/asym-encrypt}

\subsection{digital signatures}

\input{../secure/digital-sigs}

\section{encryption + authentication pitfalls}

\input{../secure/protocol-oops}

\subsection{replay attacks}

\input{../secure/replay-attacks}


\subsection{other attacks}

\begin{frame}{other attacks without breaking math}
\end{frame}

\input{../secure/other-attacks}

\section{on the lab}
\begin{frame}{on the lab}
\end{frame}

\section{certificate authorities}

\input{../secure/cert-authorities}

\subsection{how certificates verified}
\input{../secure/cert-auth-verified}

\section{preview: additional tools}
\begin{frame}{additional crypto tools}
    \begin{itemize}
    \item cryptographic hash functions (summarize data)
    \item `secure' random numbers
    \item key agreement
    \end{itemize}
\end{frame}

\section{cryptographic hashes}

% FIXME: hashes
\input{../secure/crypto-hash}

\subsection{password hashing}

\input{../secure/pass-hash}

\section{random numbers}
\input{../secure/random-numbers}

\section{key agreement}

\input{../secure/key-agreement}

\subsection{aside: key agreement to public key encrypt}
\input{../secure/key-agree-pubkey}

\section{putting it together: TLS}

\subsection{handshake}
\input{../secure/tls-handshake-summary}

\subsection{after handshake}
\input{../secure/tls-after-handshake}

\subsection{TLS properties}
\input{../secure/tls-handshake-props}
\subsection{summary}
\input{../secure/summary}

\section{backup slides}
\begin{frame}{backup slides}
\end{frame}

\section{misc. security issues}

\subsection{denial of service}
\input{../secure/dos}
    % FIXME: example of small request w/ big response

\subsubsection{amplification example}
% FIXME: https://blog.cloudflare.com/technical-details-behind-a-400gbps-ntp-amplification-ddos-attack/

\subsection{firewalls} % FIXME: complete
\input{../network/firewalls}
% FIXME: update readings to mention IPv6 equivalent



\end{document}
