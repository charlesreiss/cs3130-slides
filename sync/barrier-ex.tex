\begin{frame}[fragile]{exercise}
\lstset{language=C,style=smaller}
\begin{lstlisting}
pthread_barrier_t barrier;
int x = 0, y = 0;
void thread_one() {
    y = 10;
    pthread_barrier_wait(&barrier);
    y = x + y;
    pthread_barrier_wait(&barrier);
    pthread_barrier_wait(&barrier);
    printf("%d %d\n", x, y);
}

void thread_two() {
    x = 20;
    pthread_barrier_wait(&barrier);
    pthread_barrier_wait(&barrier);
    x = x + y;
    pthread_barrier_wait(&barrier);
}
\end{lstlisting}
\begin{itemize}
\item if both thread\_one, thread\_two run at once
\item output? 
\end{itemize}
\end{frame}
