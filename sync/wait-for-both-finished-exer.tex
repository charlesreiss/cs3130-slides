\begin{frame}[fragile,label=waitForBothFinished]\frametitle{exercise: wait for both finished}
\begin{lstlisting}[language=C++,style=smaller]
pthread_mutex_t lock; pthread_cond_t cv;
bool FirstFinished = false; bool SecondFinished = false;
\end{lstlisting}
\begin{minipage}{.45\textwidth}
\begin{lstlisting}[language=C++,style=smaller]
void FinishFirst() {
    pthread_mutex_lock(&lock);
    FirstFinished = true;
    ____________________  // (1)
    pthread_mutex_unlock(&lock);
}
\end{lstlisting}
\end{minipage}
\begin{minipage}{.45\textwidth}
\begin{lstlisting}[language=C++,style=smaller]
void FinishSecond() {
    pthread_mutex_lock(&lock);
    SecondFinished = true;
    ____________________ // (1)
    pthread_mutex_unlock(&lock);
}
\end{lstlisting}
\end{minipage}
\\
\begin{lstlisting}[language=C++,style=smaller]
void WaitForBothFinished() {
    pthread_mutex_lock(&lock);
    ___ ( ____________________________ ) { // (2)
        pthread_cond_wait(&lock, &cv);
    }
    pthread_mutex_unlock(&lock);
}
\end{lstlisting}
\end{tikzpicture}
Fill in the blanks.
\end{frame}
