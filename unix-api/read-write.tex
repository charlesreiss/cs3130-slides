
\input{../unix-api/read-write-lib}
\againframe<1>{readWrite}

\begin{frame}[fragile,label=readExample1]{read'ing one byte at a time}
\begin{lstlisting}[language=C++,style=small,morekeywords=ssize\_t,morekeywords=string]
string s;
ssize_t amount_read;
char c;
/* cast to void * not needed in C */
while ((amount_read = read(STDIN_FILENO, (void*) &c, 1)) > 0) {
    /* amount_read must be exactly 1 */
    s += c;
}
if (amount_read == -1) {
    /* some error happened */
    perror("read"); /* print out a message about it */
} else if (amount_read == 0) {
    /* reached end of file */
}
\end{lstlisting}
\end{frame}



\begin{frame}[fragile,label=writeExample]{write example}
\begin{lstlisting}[language=C++,style=small]
/* cast to void * optional in C */
write(STDOUT_FILENO, (void *) "Hello, World!\n", 14);
\end{lstlisting}
\end{frame}

