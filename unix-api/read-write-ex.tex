\begin{frame}[fragile,label=ex]{exercise}
\begin{lstlisting}[style=small]
int fd = open("output.txt", O_WRONLY|O_CREAT|O_TRUNC, 0666);
write(fd, "A", 1);
dup2(STDOUT_FILENO, 100);
dup2(fd, STDOUT_FILENO);
write(STDOUT_FILENO, "B", 1);
write(fd, "C", 1);
close(fd);
write(STDOUT_FILENO, "D", 1);
write(100, "E", 1);
\end{lstlisting}
Assume \texttt{open()} and \texttt{dup2()} \textit{do not fail},
\texttt{write()} does not fail as long as the fd it writes to is open,
fd \texttt{100} was closed and is not what open returns, and \texttt{STDOUT\_FILENO} is initially open.
What is written to \texttt{output.txt}? \\
\begin{tabular}{llllll}
\textbf{A.} & ABCDE & \textbf{C.} & ABC & \textbf{E.} something else \\
\textbf{B.} & ABCD & \textbf{D.} & ACD \\
\end{tabular}
\end{frame}
